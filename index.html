<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://kit.fontawesome.com/f92fdb375c.js" crossorigin="anonymous"></script>

    <title id="typing-title"></title>

    <script src="/cdn-cgi/apps/head/vWvHkqI6PMiucyf16iiwsHKUQ_I.js"></script>
    <link rel="stylesheet" href="style.css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="text.js" defer></script>

    <style>
      #video-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
        pointer-events: none;
      }

      .button-wrapper {
        position: relative;
      }

      .button.primary {
        text-align: center;
        width: 100%;
      }

      #mute-button {
        display: none;
        text-align: center;
        width: 100%;
      }

      #stats-container {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 200px;
        height: 120px;
        background-color: rgba(0, 0, 0, 0.5);
        border-radius: 8px;
        padding: 10px;
        z-index: 1000;
      }

      canvas {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div class="hero-text">
      <h1 class="hero-text-header">eye<b class="ong">.navy</b></h1>
      <p class="hero-text-description"></p>
    </div>

    <audio id="background-audio" src="song.mp3"></audio>

    <div class="button-wrapper">
      <a class="button primary" id="play-button">Music</a>
      <a class="button primary" id="mute-button" style="display: none;">Mute</a>
    </div>

    <div id="stats-container">
      <canvas id="pingChart"></canvas>
    </div>

    <script>
      let isMusicButtonClicked = false;
      let isMuted = false;

      const playButton = document.getElementById('play-button');
      const muteButton = document.getElementById('mute-button');
      const audio = document.getElementById('background-audio');

      playButton.addEventListener('click', function () {
        if (!isMusicButtonClicked) {
          isMusicButtonClicked = true;
          audio.play();
          playButton.style.display = 'none';
          muteButton.style.display = 'inline-block';

          const oldVideo = document.querySelector('#video-background');
          if (oldVideo) {
            oldVideo.parentNode.removeChild(oldVideo);
          }

          const newVideo = document.createElement('video');
          newVideo.id = 'video-background';
          newVideo.src = 'https://cdn.discordapp.com/attachments/836791387945041920/1212765456193298442/Kodak_Black_-_Shampoo_Official_Music_Video.mp4?ex=65f306d8&is=65e091d8&hm=429a671930031be66363773ae9e83fe9b45557b366cfa20f39049f3191957c21&';
          newVideo.autoplay = true;
          newVideo.loop = true;
          newVideo.muted = true;
          newVideo.controls = false;
          newVideo.disablePictureInPicture = true;
          newVideo.playsInline = true;
          newVideo.classList.add('fullscreen', 'bg-video');
          document.body.appendChild(newVideo);
        }
      });

      muteButton.addEventListener('click', function () {
        isMuted = !isMuted;
        audio.muted = isMuted;
        muteButton.textContent = isMuted ? 'Unmute' : 'Mute';
      });

      // Typing effect for the title
      const titleElement = document.getElementById('typing-title');
      const titleText = 'eye.navy';
      let currentIndex = 0;

      function updateTitle() {
        titleElement.textContent = titleText.substring(0, currentIndex);
        currentIndex = (currentIndex + 1) % (titleText.length + 1);
      }

      setInterval(updateTitle, 500);
    </script>

    <script>
      var pingData = [];
      var chart;

      function refreshStats() {
        var newPing = Math.floor(Math.random() * 100) + 1;
        pingData.push(newPing);

        if (pingData.length > 10) {
          pingData.shift();
        }

        updateChart();
      }

      function updateChart() {
        if (!chart) {
          var ctx = document.getElementById('pingChart').getContext('2d');
          chart = new Chart(ctx, {
            type: 'line',
            data: {
              labels: Array.from({ length: 10 }, (_, i) => ''),
              datasets: [
                {
                  label: 'Ping',
                  data: pingData,
                  borderColor: 'white',
                  fill: false,
                },
              ],
            },
            options: {
              scales: {
                x: [
                  {
                    display: false,
                  },
                ],
                y: [
                  {
                    ticks: {
                      beginAtZero: true,
                    },
                  },
                ],
              },
            },
          });
        } else {
          chart.data.labels = Array.from({ length: 10 }, (_, i) => '');
          chart.data.datasets[0].data = pingData;
          chart.update();
        }
      }

      setInterval(refreshStats, 1000);

      window.onload = function () {
        refreshStats(); // Initial refresh
      };
    </script>
  </body>
</html>
